שולחן ערוך אורח חיים הלכות ראש חודש סימן תכח

לעולם קורין * צו את אהרן קודם פסח בפשוטה, ומצורע במעוברת,
חוץ (ו) ג מבה"ח מעוברת (וה"ש מעוברת) שקורין אחרי מות קודם הפסח.
* ולעולם קורין פרשת * ד במדבר סיני קודם עצרת,
* תשעה באב קודם ואתחנן, אתם נצבים קודם ר"ה.
ולכן כשר"ה (ז) ביום ב"ג, שיש שתי שבתות בין ר"ה לסוכות,
צריכים לחלק נצבים וילך כדי שיקראו וילך בין ר"ה לצום כפור,
והאזינו בין צום כפור לסוכות;
וסימן: (ח) ב"ג ה המלך (דניאל א, ה) פת וילך.
אבל (ט) כשר"ה ביום ה"ו, אז אין בין ר"ה לסוכות אלא שבת אחת שקורין בה האזינו,
אז וילך עם נצבים קודם ר"ה, וסי' לפשוטה:
 (י) ו <ג> פקדו ופסחו, ולמעוברת: סגרו ופסחו, מנו ועצרו, צומו וצלו, קומו ותקעו.


[Это можно добавить как тест, но само по себе оно ничего не даёт - уже написан код,
который считает високосный ли год, какого он сота (мархешван/кислев), какой день недели Рош ХаШоно, день недели Пейсаха...
Знаки лет в распределении по простым и високосным.
Первая буква - день недели Рош ашана.
Вторая определяет длину мархешвана и кислева.
Три варианта: כסידרם - כ
ש - שלמה
ח- חסרה
Последняя буква - день недели Песаха (или рош ходеш нисан). На самом деле избыточна, как контрольная цифра

שנים פשוטות: בחג • בשה • גכה • הכז • השא • זחא • זשג
שנים מעוברות: בחה • בשז • גכז • החא • השג • זחג • זשה
]


Реперные точки:

После Симхас Тейро читают Брейшис

Перед Песахом читают:
  в простой год -  Мецора
  в високосный, начало года - день хамиши, а хешван и кислев оба полные или оба неполные - Ахарей мот
  все остальные случаи високосных годов - Цав.

Перед Шавуот читают Бемидбар

Перед 9 ава или в сам 9 ава - Дварим

Перед Рош ашана Ницавим и Вайелех, если Рош ашана в 2 или третий день недели - Ницавим


Все остальное по приведенному алгоритму.
Определяешь праздники года по дням недели
Втыкаешь определенные выше главы. (Здесь ты уже знаешь количество Шмини)
Получаешь количество шабатов в промежутке между реперными точками и шабатами
Разницу заполняешь объеденением глав из списка.

Не понятно, но попробую начать программировать.

А разница между вавилонией и Св.З.?


"Алгоритм":
1. Выясняем тип года (см. )
2. На основании этого узнаем номер главы перед Песхом
3. Подситываем количество суббот после Симхат Тора до Песаха
4. Если оно меньше на одну, то главы 22 и 23 объединяют. Если разница больше - ошибка
5. Подсчитываем число глав после выбранной в п.2 до 34 (Бемидбар). Число суббот 6 (или исключение в Земле Израиля иногда 7)
6. Если глав больше на 1, объединяем 32 и 33, если на 2, то также и 29-30, если 3 то и 27-28
7. Подсчитываем число суббот после Шавуот и до 9 ава (включая). Количество глав 45-34, 11
8. Если суббот меньше на 1, то объединяем 42-43; вне Земли Израиля возможно, что разница 2 - объединяем 39-40
9. 51-52 - обычно объединены, кроме первого дня  Рош ашана в понедельник или вторник

Пока делал красивый алгоритм нашел табличный метод:
https://www.shoresh.org.il/spages/articles/m/parashathibur.htm

На твой выбор.

Для йеменцев нужна отдельная программа.

Спор р. Саадьи Гаона и:
https://he.wikipedia.org/wiki/%D7%9E%D7%97%D7%9C%D7%95%D7%A7%D7%AA_%D7%A8%D7%91_%D7%A1%D7%A2%D7%93%D7%99%D7%94_%D7%92%D7%90%D7%95%D7%9F_%D7%95%D7%91%D7%9F_%D7%9E%D7%90%D7%99%D7%A8

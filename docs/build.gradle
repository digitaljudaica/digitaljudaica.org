// for Tut
repositories {
  maven {
    url 'https://dl.bintray.com/tpolecat/maven/'
  }
}

apply plugin: 'scala'

// for Tut
configurations.all {
  resolutionStrategy {
    force 'org.scala-lang:scala-library:2.12.7'
  }
}

dependencies {
  zinc    "com.typesafe.zinc:zinc:$zincVersion"
  compile "org.scala-lang:scala-library:2.12.7"

  runtime project(':library')
  runtime "org.tpolecat:tut-core_2.12:0.6.10"
}

task tut(type: JavaExec) {
  group = 'documentation'
  main = 'tut.TutMain'
  args = ["$projectDir/tut", "$projectDir/examples", ".*\\.(md|markdown|txt|htm|html)"]
  classpath = sourceSets.main.runtimeClasspath
}

build.dependsOn tut
//  build.dependsOn ':library:scaladoc'
build.dependsOn ':paper:processDocBook'
build.doLast {
  project.sync {
    from "${project(':paper').buildDir}/docBook/"
//  from project(':paper:').tasks.getByPath('processDocBook').finalOutputDirectoryRoot
    into 'paper'
  }  
//  sync {
//    from project(':library').tasks.named('scaladoc').get().destinationDir
//    into 'scaladoc'
//  }
}

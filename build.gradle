plugins {
  id 'com.github.ben-manes.versions'
  id 'idea'
  id 'base'
}

idea {
  module {
    excludeDirs += [
      file('.idea'),
      file('gradle')
    ]
  }
}

// There is no Java in the project :)
project.gradle.startParameter.excludedTaskNames.add('compileJava')

subprojects {
  group = 'org.opentorah'
  version = projectVersion

  repositories {
    mavenCentral()
  }

  apply from: '../scala.gradle'
  apply from: '../library.gradle'
  apply from: '../mdoc.gradle'
  apply from: '../paper.gradle'

  tasks.withType(ScalaCompile) {
    scalaCompileOptions.with {
      targetCompatibility = '1.8'
      additionalParameters = ['-feature']
    }
  }

  task site
  site.description('Generate project website')
  site.group('publishing')

  task upload
  upload.description('Upload artifacts and plugins')
  upload.group('publishing')

  task deploy
  deploy.description('Publish containers and re-deploy services')
  deploy.group('publishing')
}

plugins {
  id 'base'
  id 'org.opentorah.docbook'
}

docBook {
  documents = ["judaica", "typesetting"]

  outputFormats = ["html", "pdf", "epub2"]

  substitutions = [
    "project.version": project.version
  ]

  parameters.common = [
    "section.autolabel.max.depth": "6"
  ]

  parameters.htmlCommon = [
         // Include page number in cross-references
    "insert.xref.page.number": "yes"
  ]

  parameters.pdf = [
    "title.font.family"    : "DejaVu Sans",
    "body.font.family"     : "DejaVu Sans",
    "sans.font.family"     : "DejaVu Sans",
    "monospace.font.family": "DejaVu Sans Mono",
    "symbol.font.family"   : "DejaVu Sans",
    "body.font.master"     : "12",
    "footnote.font.size"   : "10",

    // Suppress content indent
    "body.start.indent"    : "0pt",

    // Some space for the list labels
    "orderedlist.label.width": "2em"
  ]
}

task site
site.group('publishing')
site.dependsOn processDocBook
site.doLast {
  project.sync {
    from "${processDocBook.outputDirectory}/judaica"
    into "$rootDir/docs/judaica"
  }
  project.sync {
    from "${processDocBook.outputDirectory}/typesetting"
    into "$rootDir/docs/typesetting"
  }
}
